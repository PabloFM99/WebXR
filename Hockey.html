<html>

<head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v$npm_package_version/dist/aframe-physics-system.min.js"></script>
</head>

<body>
    <div id="objeto"></div>

    <script src="app.js"></script>
      
    <a-scene physics="-9.8">
        
        <a-plane position="0 1.1 -22" color="lightgreen" width="12" height="48" rotation="-90 0" static-body></a-plane>
        <a-plane position="0 1 -22" color="green" width="120" height="96" rotation="-90 0" static-body></a-plane>
        <a-entity id="Red" position="0 1.1 -1" dynamic-body grabbable draggable stretchable droppable>
            <a-cylinder color="red" radius="1" height="0.1" scale="0.5">
            <a-sphere color="red" radius="0.5"></a-sphere>
        </a-entity>

        <a-cylinder position="0 1.3 -5" color="yellow" radius="1" height="0.05"scale="0.5" dynamic-body></a-cylinder>
        <a-entity id="Blue" position="0 1.1 -20" dynamic-body grabbable draggable stretchable droppable>
            <a-cylinder  color="blue" radius="1" height="0.1" scale="0.5">
            <a-sphere  color="blue" radius="0.5"></a-sphere>
        </a-entity>

        <a-light type="ambient" position="0 20 -25" color="#fff"></a-light>
        
        <a-camera position="0 12 0" look-controls="pointerLockEnabled: true">
            <a-cursor ></a-cursor>
        </a-camera>
    </a-scene>
    <script>
        AFRAME.registerComponent('draggable', {
            init: function () {
                this.el.addEventListener('mousedown', (event) => {
                    this.dragging = true;
                });
                this.el.addEventListener('mouseup', (event) => {
                    this.dragging = false;
                });
            },
            tick: function () {
                if (this.dragging) {
                    // Actualiza la posición del objeto en el plano XZ
                    const cursorPos = this.el.sceneEl.camera.el.object3D.position;
                    const newPos = { 
                        x: cursorPos.x, 
                        y: this.el.object3D.position.y,
                        z: cursorPos.z 
                    };
                    this.el.setAttribute('position', newPos);
                }
            }
        });

        AFRAME.registerComponent('grabbable', {
            init: function () {
                this.el.addEventListener('mouseenter', (event) => {
                    this.el.setAttribute('color', 'white'); // Cambia de color al pasar el ratón
                });
                this.el.addEventListener('mouseleave', (event) => {
                    this.el.setAttribute('color', '#FF5733'); // Vuelve a su color original
                });
            }
        });
    </script>


</body>

</html>
